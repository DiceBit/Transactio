_format_version: "3.0"

services:
  - name: auth-service
    url: http://localhost:8080
    routes:
    - name: "auth-login"
      paths:
        - /login
    - name: "auth-signup"
      paths:
        - /signup
    - name: "auth-test"
      paths:
        - /test
      methods:
        - GET
    - name: "auth-health"
      paths:
        - /health

upstreams:
  - name: auth-service
    targets:
      - target: auth-service:8080
    healthchecks:
      active:
        http_path: /health
        healthy:
          interval: 5
          successes: 2
        unhealthy:
          interval: 5
          http_failures: 3